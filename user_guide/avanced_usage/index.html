
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Pharmbio Python Package Documentation">
      
      
        <meta name="author" content="Nima Chamyani">
      
      
        <link rel="canonical" href="https://pharmbio.github.io/pharmbio_package/user_guide/avanced_usage/">
      
      
        <link rel="prev" href="../default_usage/">
      
      
        <link rel="next" href="../api/">
      
      
      <link rel="icon" href="../../assets/favicon_64x64.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>Avanced Usage - Pharmbio Python Package</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#avanced-usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pharmbio Python Package" class="md-header__button md-logo" aria-label="Pharmbio Python Package" data-md-component="logo">
      
  <img src="../../assets/pharmbio_package_tp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pharmbio Python Package
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Avanced Usage
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pharmbio/pharmbio_package" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pharmbio_package
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting_started/" class="md-tabs__link">
          
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contribution_guide/" class="md-tabs__link">
          
  
    
  
  Contributing Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../release_notes/" class="md-tabs__link">
          
  
    
  
  Release Notes

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pharmbio Python Package" class="md-nav__button md-logo" aria-label="Pharmbio Python Package" data-md-component="logo">
      
  <img src="../../assets/pharmbio_package_tp.png" alt="logo">

    </a>
    Pharmbio Python Package
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pharmbio/pharmbio_package" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pharmbio_package
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../getting_started/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Usage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
          
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../default_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Default Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Avanced Usage
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Avanced Usage
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#looking-up-the-experiment-in-the-database-with-name" class="md-nav__link">
    <span class="md-ellipsis">
      Looking up the experiment in the database with name
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Looking up the experiment in the database with name">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-get_projects_list" class="md-nav__link">
    <span class="md-ellipsis">
      Using get_projects_list()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-image-quality-data" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Image Quality Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Accessing Image Quality Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-get_image_quality_ref-with-advanced-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Using get_image_quality_ref() with Advanced Filtering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flagging-outlier-images" class="md-nav__link">
    <span class="md-ellipsis">
      Flagging Outlier Images
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flagging Outlier Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#advanced-functions-in-pharmbiodata_processingquality_control" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Functions in pharmbio.data_processing.quality_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deep-dive-into-flag_outlier_images-function" class="md-nav__link">
    <span class="md-ellipsis">
      Deep Dive into flag_outlier_images Function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieving-cell-morphology-data" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving Cell Morphology Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retrieving Cell Morphology Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exploring-the-pharmbiodatasetcell_morphology-module" class="md-nav__link">
    <span class="md-ellipsis">
      Exploring the pharmbio.dataset.cell_morphology Module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanation-of-the-experiment-class" class="md-nav__link">
    <span class="md-ellipsis">
      Explanation of the Experiment Class
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/logger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/data_processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/visualization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.4 7.5c.8.8.8 2.1 0 2.8l-2.8 2.8-7.8-7.8 2.8-2.8c.8-.8 2.1-.8 2.8 0l1.8 1.8 3-3 1.4 1.4-3 3 1.8 1.8m-5.8 5.8-1.4-1.4-2.8 2.8-2.1-2.1 2.8-2.8-1.4-1.4-2.8 2.8-1.5-1.4-2.8 2.8c-.8.8-.8 2.1 0 2.8l1.8 1.8-4 4 1.4 1.4 4-4 1.8 1.8c.8.8 2.1.8 2.8 0l2.8-2.8-1.4-1.4 2.8-2.9Z"/></svg>
  
  <span class="md-ellipsis">
    Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2 1 21h22M12 6l7.53 13H4.47M11 10v4h2v-4m-2 6v2h2v-2"/></svg>
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../contribution_guide/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Contributing Guide
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../release_notes/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Release Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/data-analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/outlier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outlier
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/pharmbio/pharmbio_package/edit/main/docs/user_guide/avanced_usage.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/pharmbio/pharmbio_package/raw/main/docs/user_guide/avanced_usage.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="avanced-usage">Avanced Usage</h1>
<h2 id="looking-up-the-experiment-in-the-database-with-name">Looking up the experiment in the database with name</h2>
<p>Certainly, here's the concise version of the tutorial focusing on the usage of <code>get_projects_list()</code>:</p>
<h3 id="using-get_projects_list">Using <code>get_projects_list()</code></h3>
<h4 id="basic-usage-retrieving-all-projects">Basic Usage - Retrieving All Projects</h4>
<p>To fetch the complete list of project names without any filters, simply call the function without passing any arguments. This is useful for getting an overview of all available projects in the database.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">project_list</span> <span class="o">=</span> <span class="n">get_projects_list</span><span class="p">()</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">project_list</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output Example:</strong> <code>['Project A', 'Project B', 'Project C', ...]</code></p>
<h4 id="filtered-search-using-the-lookup-parameter">Filtered Search - Using the <code>lookup</code> Parameter</h4>
<p>For more refined searches, use the <code>lookup</code> parameter. This is particularly helpful when dealing with large datasets where you need to find projects related to a specific topic or keyword.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">filtered_list</span> <span class="o">=</span> <span class="n">get_projects_list</span><span class="p">(</span><span class="n">lookup</span><span class="o">=</span><span class="s1">&#39;aros&#39;</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">filtered_list</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output Example:</strong> <code>['AROS-CP', 'AROS-Reproducibility-MoA-Full', ...]</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The search is case-insensitive and can match partial strings.</p>
</div>
<h2 id="accessing-image-quality-data">Accessing Image Quality Data</h2>
<h3 id="using-get_image_quality_ref-with-advanced-filtering">Using <code>get_image_quality_ref()</code> with Advanced Filtering</h3>
<h4 id="introduction">Introduction</h4>
<p>The <code>get_image_quality_ref()</code> function, part of the <code>pharmbio.dataset.image_quality</code> module, is essential for retrieving quality control reference data from specific studies. This tutorial covers its advanced usage, particularly focusing on complex filtering techniques to refine the data retrieval process.</p>
<h4 id="step-by-step-guide">Step-by-Step Guide</h4>
<ol>
<li><strong>Basic Retrieval without Replication Dropping</strong>
   Initially, you can retrieve all replications (including duplicates) by setting the <code>drop_replication</code> parameter to <code>"None"</code>. This will return every instance, replicated analysis IDs included.
   <div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">qc_ref_df</span> <span class="o">=</span> <span class="n">get_image_quality_ref</span><span class="p">(</span><span class="s2">&quot;sarscov2-repurposing&quot;</span><span class="p">,</span> <span class="n">drop_replication</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_ref_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Filtering by Date</strong>
   To focus on experiments conducted in a specific year, use the <code>filter</code> parameter. For instance, to view experiments from 2021:
   <div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">qc_ref_df</span> <span class="o">=</span> <span class="n">get_image_quality_ref</span><span class="p">(</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    <span class="s2">&quot;sarscov2-repurposing&quot;</span><span class="p">,</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="n">drop_replication</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;analysis_date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2021&quot;</span><span class="p">]},</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="p">)</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_ref_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Combining Multiple Filters</strong>
   You can combine filters to further refine your search. For example, to view experiments from both 2021 and 2023:
   <div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">qc_ref_df</span> <span class="o">=</span> <span class="n">get_image_quality_ref</span><span class="p">(</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="s2">&quot;sarscov2-repurposing&quot;</span><span class="p">,</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="n">drop_replication</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;analysis_date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2021&quot;</span><span class="p">,</span> <span class="s2">&quot;2023&quot;</span><span class="p">]},</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">)</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_ref_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Filtering by Specific Criteria</strong>
   To get data from 2023 that used VeroE6 cells, add another key to the filter:
   <div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">qc_ref_df</span> <span class="o">=</span> <span class="n">get_image_quality_ref</span><span class="p">(</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="s2">&quot;sarscov2-repurposing&quot;</span><span class="p">,</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="n">drop_replication</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">,</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;analysis_date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2023&quot;</span><span class="p">],</span> <span class="s2">&quot;plate_barcode&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;VeroE6&quot;</span><span class="p">]},</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">)</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_ref_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Advanced Filtering with Partial Matches</strong>
   For more specific searches, like filtering by a part of a string, you can include partial strings in the filter. For example, to find data with <code>plate_acq_id</code> starting with "37":
   <div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">qc_ref_df</span> <span class="o">=</span> <span class="n">get_image_quality_ref</span><span class="p">(</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="s2">&quot;sarscov2-repurposing&quot;</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="n">drop_replication</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">,</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="nb">filter</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>        <span class="s2">&quot;analysis_date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2023&quot;</span><span class="p">],</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>        <span class="s2">&quot;plate_barcode&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;VeroE6&quot;</span><span class="p">],</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>        <span class="s2">&quot;plate_acq_id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;37&quot;</span><span class="p">],</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="p">},</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">)</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_ref_df</span><span class="p">)</span>
</span></code></pre></div></li>
</ol>
<div class="admonition note key points">
<p class="admonition-title">Note</p>
<ul>
<li><strong>Flexible Filtering:</strong> The <code>filter</code> argument accepts multiple keys and values. Values should be in list format and can be partial strings.</li>
<li><strong>String-Based Filtering:</strong> Even numerical values should be passed as strings to enable partial matching.</li>
<li><strong>Combining Filters:</strong> Filters act conjunctively, allowing for precise data retrieval based on multiple criteria.</li>
</ul>
</div>
<h2 id="flagging-outlier-images">Flagging Outlier Images</h2>
<h3 id="advanced-functions-in-pharmbiodata_processingquality_control">Advanced Functions in <code>pharmbio.data_processing.quality_control</code></h3>
<h4 id="introduction_1">Introduction</h4>
<p>The <code>pharmbio.data_processing.quality_control</code> module in Python provides an extensive set of functions for handling and analyzing image quality control data in biomedical research. This tutorial will cover the advanced functionalities of this module, specifically focusing on functions such as <code>get_qc_module</code>, <code>get_qc_data_dict</code>, <code>get_channels</code>, and <code>flag_outlier_images</code>.</p>
<h4 id="1-get_qc_module">1. <code>get_qc_module</code></h4>
<p><strong>Purpose:</strong> To extract and return a sorted list of image quality module names from the quality control data.</p>
<p><strong>Usage Example:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">qc_data</span> <span class="o">=</span> <span class="n">get_image_quality_data</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">qc_modules</span> <span class="o">=</span> <span class="n">get_qc_module</span><span class="p">(</span><span class="n">qc_data</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_modules</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="2-get_qc_data_dict">2. <code>get_qc_data_dict</code></h4>
<p><strong>Purpose:</strong> To create a dictionary of image quality module data frames, filtered by specified modules to keep or drop.</p>
<p><strong>Usage Example:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">qc_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    <span class="s1">&#39;ImageQuality_FocusScore&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="s1">&#39;ImageQuality_Intensity&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="s1">&#39;OtherColumn&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="p">})</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="n">qc_data_dict</span> <span class="o">=</span> <span class="n">get_qc_data_dict</span><span class="p">(</span><span class="n">qc_data</span><span class="p">,</span> <span class="n">module_to_keep</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;FocusScore&#39;</span><span class="p">})</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">qc_data_dict</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="3-get_channels">3. <code>get_channels</code></h4>
<p><strong>Purpose:</strong> To return a dictionary of channels and sub-channels for each QC module in the QC data.</p>
<p><strong>Usage Example:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">qc_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="s1">&#39;ImageQuality_FocusScore_CONC&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    <span class="s1">&#39;ImageQuality_FocusScore_HOECHST&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>    <span class="s1">&#39;ImageQuality_Intensity_CONC&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>    <span class="s1">&#39;OtherColumn&#39;</span><span class="p">:</span> <span class="o">...</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="p">})</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">channels</span> <span class="o">=</span> <span class="n">get_channels</span><span class="p">(</span><span class="n">qc_data</span><span class="p">)</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">channels</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="4-flag_outlier_images">4. <code>flag_outlier_images</code></h4>
<p><strong>Purpose:</strong> To flag outlier images based on specified quality control data using either Standard Deviation (SD) or Interquartile Range (IQR) methods.</p>
<p><strong>Usage Example:</strong></p>
<h3 id="deep-dive-into-flag_outlier_images-function">Deep Dive into <code>flag_outlier_images</code> Function</h3>
<p>The <code>flag_outlier_images</code> function in the <code>pharmbio.data_processing.quality_control</code> module is designed to flag outlier images in a dataset based on certain statistical methods. It's a sophisticated function that allows for nuanced control over the outlier detection process. Let's break it down and examine its components and usage.</p>
<h4 id="function-parameters">Function Parameters</h4>
<ol>
<li>
<p><strong>method (Literal["SD", "IQR"]):</strong> The outlier detection method, either Standard Deviation ("SD") or Interquartile Range ("IQR").</p>
</li>
<li>
<p><strong>IQR_normalization (bool):</strong> Determines whether to normalize the data when using the IQR method.</p>
</li>
<li>
<p><strong>normalization (Literal["zscore", "minmax"]):</strong> The type of normalization to apply, either z-score or min-max normalization.</p>
</li>
<li>
<p><strong>sd_step_dict (Dict[str, Tuple[float, float]]):</strong> A dictionary specifying the SD steps for each module.</p>
</li>
<li>
<p><strong>default_sd_step (Tuple[float, float]):</strong> Default SD steps if <code>sd_step_dict</code> is not provided.</p>
</li>
<li>
<p><strong>quantile_limit (float):</strong> The quantile limit for the IQR method.</p>
</li>
<li>
<p><strong>multiplier (float):</strong> The multiplier for the IQR method.</p>
</li>
</ol>
<h4 id="examples-of-usage">Examples of Usage</h4>
<ol>
<li><strong>Basic Usage with SD Method:</strong>
   <div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">qc_data</span> <span class="o">=</span> <span class="n">get_image_quality_data</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">flagged_data</span> <span class="o">=</span> <span class="n">flag_outlier_images</span><span class="p">(</span><span class="n">qc_data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;SD&#39;</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Using IQR Method with Specific Modules:</strong>
   <div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">flagged_data</span> <span class="o">=</span> <span class="n">flag_outlier_images</span><span class="p">(</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a> <span class="n">qc_data</span><span class="p">,</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a> <span class="n">module_to_keep</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;FocusScore&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity&#39;</span><span class="p">},</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;IQR&#39;</span><span class="p">,</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a> <span class="n">multiplier</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Applying Custom SD Range for Specific Modules:</strong>
   <div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">sd_step_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;FocusScore&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;Intensity&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">flagged_data</span> <span class="o">=</span> <span class="n">flag_outlier_images</span><span class="p">(</span><span class="n">qc_data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;SD&#39;</span><span class="p">,</span> <span class="n">sd_step_dict</span><span class="o">=</span><span class="n">sd_step_dict</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Combining Module Filtering and Normalization:</strong>
   <div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">flagged_data</span> <span class="o">=</span> <span class="n">flag_outlier_images</span><span class="p">(</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a> <span class="n">qc_data</span><span class="p">,</span> <span class="n">module_to_keep</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;FocusScore&#39;</span><span class="p">},</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a> <span class="n">module_to_drop</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Intensity&#39;</span><span class="p">},</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a> <span class="n">normalization</span><span class="o">=</span><span class="s1">&#39;minmax&#39;</span><span class="p">,</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;SD&#39;</span><span class="p">)</span>
</span></code></pre></div></li>
</ol>
<div class="admonition note key points">
<p class="admonition-title">Note</p>
<ul>
<li><strong>Flexibility:</strong> These functions provide flexibility in processing and analyzing QC data by allowing the selection of specific modules and methods for outlier detection.</li>
<li><strong>Customization:</strong> You can customize the filtering process with <code>module_to_keep</code> and <code>module_to_drop</code> to target specific QC modules.</li>
<li><strong>Outlier Detection:</strong> <code>flag_outlier_images</code> offers robust outlier detection with options for normalization and threshold setting.</li>
</ul>
</div>
<h2 id="retrieving-cell-morphology-data">Retrieving Cell Morphology Data</h2>
<h3 id="exploring-the-pharmbiodatasetcell_morphology-module">Exploring the <code>pharmbio.dataset.cell_morphology</code> Module</h3>
<p>The <code>pharmbio.dataset.cell_morphology</code> module provides a suite of functions specifically designed to handle and query cell morphology data. Each function serves a unique purpose, catering to various aspects of data handling, from retrieval and outlier detection to data aggregation. Let's delve into the details of these functions.</p>
<h4 id="1-get_cell_morphology_ref">1. <code>get_cell_morphology_ref()</code></h4>
<ul>
<li><strong>Purpose:</strong> Retrieves cell morphology references from a database, allowing users to specify a reference name and apply filtering.</li>
<li><strong>Parameters:</strong></li>
<li><code>name</code>: A mandatory parameter specifying the reference name.</li>
<li><code>filter</code>: An optional dictionary for filtering the query.</li>
<li><strong>Usage Example:</strong>
  <div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;example_reference&quot;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nb">filter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;column1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;value_1&quot;</span><span class="p">,</span> <span class="s2">&quot;value2&quot;</span><span class="p">],</span> <span class="s2">&quot;column2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;value3&quot;</span><span class="p">]}</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">filtered_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_ref</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">display</span><span class="p">(</span><span class="n">filtered_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Key Point:</strong> This function is crucial for extracting specific cell morphology data and supports complex query constructions using filters.</li>
</ul>
<h4 id="2-get_outlier_df">2. <code>get_outlier_df()</code></h4>
<ul>
<li><strong>Purpose:</strong> Retrieves a DataFrame containing detailed information about outliers from flagged QC data.</li>
<li><strong>Parameters:</strong></li>
<li><code>flagged_qc_df</code>: A DataFrame containing flagged QC data.</li>
<li><code>with_compound_info</code>: Optionally includes compound-related information.</li>
<li><strong>Usage Example:</strong>
  <div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">flagged_qc_df</span> <span class="o">=</span> <span class="c1"># Pre-existing DataFrame with flagged QC data</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">outlier_df</span> <span class="o">=</span> <span class="n">get_outlier_df</span><span class="p">(</span><span class="n">flagged_qc_df</span><span class="p">)</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">outlier_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Key Point:</strong> This function is essential for detailed outlier analysis in cell morphology studies, offering an optional inclusion of compound information.</li>
</ul>
<h4 id="3-get_comp_outlier_info">3. <code>get_comp_outlier_info()</code></h4>
<ul>
<li><strong>Purpose:</strong> Computes and provides detailed information about outliers in a dataset.</li>
<li><strong>Parameters:</strong></li>
<li><code>flagged_df</code>: A DataFrame with flagged data, including batch identification and outlier flags.</li>
<li><strong>Usage Example:</strong>
  <div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">flagged_df</span> <span class="o">=</span> <span class="c1"># Pre-existing DataFrame with flagged data</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">outlier_info_df</span> <span class="o">=</span> <span class="n">get_comp_outlier_info</span><span class="p">(</span><span class="n">flagged_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Key Point:</strong> It's vital for understanding the impact of outliers on data, particularly useful in large-scale studies involving numerous compounds.</li>
</ul>
<h4 id="4-get_cell_morphology_data">4. <code>get_cell_morphology_data()</code></h4>
<ul>
<li><strong>Purpose:</strong> Aggregates cell morphology data from various sources, incorporating user-defined parameters for detailed analysis.</li>
<li><strong>Parameters:</strong><ul>
<li><code>cell_morphology_ref_df</code>: The main DataFrame containing cell morphology data.</li>
<li><code>flagged_qc_df</code>: (Optional) DataFrame with flagged QC data to identify outliers.</li>
<li><code>site_threshold</code>: Numeric threshold for flagged sites in a well.</li>
<li><code>compound_threshold</code>: Numeric threshold for percentage of data loss.</li>
<li><code>aggregation_level</code>: Level of data aggregation (e.g., "cell", "well").</li>
<li><code>aggregation_method</code>: Methods for aggregation (e.g., "mean", "median").</li>
<li><code>path_to_save</code>: Path to save the aggregated data.</li>
<li><code>use_gpu</code>: Option to use GPU for faster processing.</li>
<li><code>save_plate_separately</code>: Whether to save data for each plate separately.</li>
</ul>
</li>
<li><strong>Data Integration:</strong> It combines reference cell morphology data (<code>cell_morphology_ref_df</code>) with quality control data (<code>flagged_qc_df</code>), if provided.</li>
<li><strong>Threshold-Based Outlier Handling:</strong> The function allows for the exclusion of data based on the number of flagged sites in a well (<code>site_threshold</code>) and the percentage of data loss at which a compound is flagged (<code>compound_threshold</code>).</li>
<li>
<p><strong>Flexible Aggregation:</strong> Aggregates data at specified levels (<code>aggregation_level</code>) like cell, site, well, plate, or compound, using various methods (<code>aggregation_method</code>).</p>
</li>
<li>
<p><strong>Usage Example:</strong></p>
<ol>
<li><strong>Basic Aggregation at the Cell Level:</strong>
   Aggregates data at the cell level without considering outliers.
   <div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">cell_morphology_ref_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_ref</span><span class="p">(</span><span class="s2">&quot;example_reference&quot;</span><span class="p">)</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">aggregated_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_data</span><span class="p">(</span><span class="n">cell_morphology_ref_df</span><span class="p">,</span> <span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;cell&#39;</span><span class="p">)</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">display</span><span class="p">(</span><span class="n">aggregated_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Aggregation with Outlier Data at the Well Level:</strong>
   Uses flagged QC data to remove outlier wells before aggregation.
   <div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">flagged_qc_df</span> <span class="o">=</span> <span class="c1"># Assume pre-existing DataFrame with flagged QC data</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">aggregated_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_data</span><span class="p">(</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    <span class="n">cell_morphology_ref_df</span><span class="p">,</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    <span class="n">flagged_qc_df</span><span class="p">,</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    <span class="n">site_threshold</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>  <span class="c1"># Wells with more than 5 flagged sites are removed</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>    <span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;well&#39;</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="p">)</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="n">display</span><span class="p">(</span><span class="n">aggregated_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Aggregation with Compound Deletion Threshold:</strong>
   Removes compounds with a high percentage of data loss.
   <div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">aggregated_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_data</span><span class="p">(</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="n">cell_morphology_ref_df</span><span class="p">,</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>    <span class="n">flagged_qc_df</span><span class="p">,</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="n">compound_threshold</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>  <span class="c1"># Compounds with more than 60% data loss are removed</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    <span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;compound&#39;</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="p">)</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="n">display</span><span class="p">(</span><span class="n">aggregated_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Custom Aggregation Method:</strong>
   Aggregates data using a custom method, such as median, for each level.
   <div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">aggregation_method</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cell&quot;</span><span class="p">:</span> <span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;well&quot;</span><span class="p">:</span> <span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;plate&quot;</span><span class="p">:</span> <span class="s2">&quot;median&quot;</span><span class="p">}</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">aggregated_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_data</span><span class="p">(</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    <span class="n">cell_morphology_ref_df</span><span class="p">,</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    <span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;plate&#39;</span><span class="p">,</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    <span class="n">aggregation_method</span><span class="o">=</span><span class="n">aggregation_method</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="p">)</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="n">display</span><span class="p">(</span><span class="n">aggregated_df</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Utilizing GPU Acceleration:</strong>
   Aggregates data using GPU acceleration for large datasets.
   <div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">aggregated_df</span> <span class="o">=</span> <span class="n">get_cell_morphology_data</span><span class="p">(</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    <span class="n">cell_morphology_ref_df</span><span class="p">,</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    <span class="n">use_gpu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    <span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;plate&#39;</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="p">)</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="n">display</span><span class="p">(</span><span class="n">aggregated_df</span><span class="p">)</span>
</span></code></pre></div></li>
</ol>
</li>
</ul>
<h4 id="conclusion">Conclusion</h4>
<p><code>get_cell_morphology_data</code> offers versatile solutions for cell morphology data analysis. Its ability to integrate different data sources, handle outliers based on user-defined thresholds, and perform custom aggregation makes it a valuable tool for researchers. By selecting appropriate parameters, you can tailor the function to meet the specific needs of your study, ensuring efficient and meaningful data analysis.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="language-text highlight"><pre><span></span><code>- This function is a comprehensive tool for cell morphology data management, offering flexibility in handling outlier data and custom aggregation methods.
</code></pre></div>
</div>
<h3 id="explanation-of-the-experiment-class">Explanation of the <code>Experiment</code> Class</h3>
<p>The <code>Experiment</code> class is a tool designed for automating the process of handling and analyzing cell morphology and image quality data in the <code>pharmbio</code> package. It integrates various functions from the <code>pharmbio.dataset.cell_morphology</code> and <code>pharmbio.dataset.image_quality</code> modules, streamlining data processing tasks. The class is initialized with parameters defined in a JSON file, providing an easy and customizable approach to experiment management.</p>
<h4 id="class-overview">Class Overview</h4>
<ul>
<li><strong>Initialization:</strong> The class is instantiated with a JSON file that includes experiment settings, such as <code>experiment_name</code>, <code>filter</code>, <code>module_to_keep</code>, etc.</li>
<li><strong>Attributes:</strong> The class maintains several attributes related to image quality, cell morphology, outlier detection, and aggregation.</li>
<li><strong>Methods:</strong> It includes methods for retrieving and processing data, aggregating results, and generating visualizations.</li>
</ul>
<h4 id="key-methods">Key Methods</h4>
<ol>
<li>
<p><strong>Data Retrieval Methods:</strong></p>
<ul>
<li><code>get_image_quality_reference_data()</code>: Retrieves image quality reference data.</li>
<li><code>get_cell_morphology_reference_data()</code>: Retrieves cell morphology reference data.</li>
</ul>
</li>
<li>
<p><strong>Data Processing Methods:</strong></p>
<ul>
<li><code>get_image_quality_data()</code>: Processes image quality data.</li>
<li><code>get_cell_morphology_data()</code>: Processes and aggregates cell morphology data.</li>
</ul>
</li>
<li>
<p><strong>Outlier Analysis Methods:</strong></p>
<ul>
<li><code>flag_outlier_images()</code>: Flags outlier images in the dataset.</li>
<li><code>get_image_guality_modules()</code>, <code>get_image_guality_data_dict()</code>: Retrieve and organize image quality data.</li>
</ul>
</li>
<li>
<p><strong>Visualization Methods:</strong></p>
<ul>
<li><code>plate_heatmap()</code>, <code>well_outlier_heatmap()</code>, <code>quality_module_lineplot()</code>: Generate various plots for data visualization.</li>
</ul>
</li>
<li>
<p><strong>Utility Methods:</strong></p>
<ul>
<li><code>print_setting()</code>: Prints the current settings of the experiment.</li>
</ul>
</li>
</ol>
<h4 id="json-file-structure">JSON File Structure</h4>
<p>The JSON file serves as the configuration for the experiment. It specifies parameters like:</p>
<ul>
<li><code>experiment_name</code>: The name of the experiment.</li>
<li><code>filter</code>: Conditions for data filtering.</li>
<li><code>force_merging_columns</code>: Handling of merging columns.</li>
<li><code>module_to_keep</code>: Modules to include in analysis.</li>
<li><code>method</code>: Method for outlier detection.</li>
<li><code>site_threshold</code>, <code>compound_threshold</code>: Thresholds for data exclusion.</li>
<li><code>aggregation_level</code>: Level of data aggregation.</li>
</ul>
<h4 id="usage-example">Usage Example</h4>
<p>With the provided JSON file which is just values for the arguments that exist in different function used above we can initiate a class instant that include all data and plot for specific experiment:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="nt">&quot;experiment_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AROS-Reproducibility-MoA-Full&quot;</span><span class="p">,</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nt">&quot;filter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">        </span><span class="nt">&quot;analysis_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">            </span><span class="s2">&quot;3248&quot;</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">            </span><span class="s2">&quot;3249&quot;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">        </span><span class="p">]</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="nt">&quot;force_merging_columns&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;keep&quot;</span><span class="p">,</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="nt">&quot;module_to_keep&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">        </span><span class="s2">&quot;FocusScore&quot;</span><span class="p">,</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">        </span><span class="s2">&quot;MaxIntensity&quot;</span><span class="p">,</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">        </span><span class="s2">&quot;MeanIntensity&quot;</span><span class="p">,</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">        </span><span class="s2">&quot;PowerLogLogSlope&quot;</span><span class="p">,</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">        </span><span class="s2">&quot;StdIntensity&quot;</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">    </span><span class="p">],</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">    </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SD&quot;</span><span class="p">,</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">    </span><span class="nt">&quot;site_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">    </span><span class="nt">&quot;compound_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">    </span><span class="nt">&quot;aggregation_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cell&quot;</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="p">}</span>
</span></code></pre></div>
<p>This JSON file serves as a configuration for initializing the <code>Experiment</code> class, detailing the parameters for the experiment's data processing and analysis. An <code>Experiment</code> object can be created and used to automate data retrieval, processing, and analysis tasks:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">experiment</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">json_file</span><span class="o">=</span><span class="s2">&quot;path_to_json_file.json&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Using the methods and attributes of the <code>Experiment</code> class, one can perform a comprehensive analysis of the experiment data, from quality control to cell morphology analysis, and visualize the results efficiently.</p>
<div class="admonition info">
<p class="admonition-title">JSON File Composition</p>
<ol>
<li><strong>Specify Mandatory Fields:</strong><ul>
<li>Always include <code>experiment_name</code> as it's essential for identifying the dataset.</li>
</ul>
</li>
<li><strong>Optional Fields:</strong><ul>
<li>Fields like <code>filter</code>, <code>module_to_keep</code>, and others are optional. If not provided, the class will use default values or behaviors.</li>
</ul>
</li>
<li><strong>Using Filters and Selections:</strong><ul>
<li>Define filters (e.g., <code>filter</code>) and module selections (<code>module_to_keep</code>) as arrays, even if only one value is needed.</li>
</ul>
</li>
<li><strong>Setting Thresholds and Parameters:</strong><ul>
<li>Include parameters like <code>site_threshold</code> and <code>compound_threshold</code> to customize data processing. Absence of these will result in the use of default thresholds.</li>
</ul>
</li>
</ol>
</div>
<div class="admonition info">
<p class="admonition-title">Class Behavior and Default Settings</p>
<ol>
<li><strong>Default Values:</strong><ul>
<li>When a variable is not specified in the JSON, the class uses predefined default values. For example, the default for <code>site_threshold</code> might be set to 6 if not specified.</li>
</ul>
</li>
<li><strong>Flexible Data Handling:</strong><ul>
<li>The class can handle various scenarios, such as missing data or unspecified parameters, by resorting to default processing methods or skipping certain steps.</li>
</ul>
</li>
<li><strong>Error Handling:</strong><ul>
<li>Ensure proper formatting and valid values in the JSON file to prevent runtime errors. For instance, numeric fields should not contain non-numeric characters.</li>
</ul>
</li>
<li><strong>Modular Approach:</strong><ul>
<li>Each method within the class is responsible for a specific aspect of the experiment's data processing. This modular design facilitates troubleshooting and customization.</li>
</ul>
</li>
</ol>
</div>
<h4 id="conclusion_1">Conclusion</h4>
<p>The <code>Experiment</code> class, when used with a well-structured JSON configuration file, provides a powerful and flexible way to automate and manage data processing tasks in cell morphology and image quality analysis. By adhering to these guidelines, researchers can efficiently configure and execute their experiments with greater control and customization.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../default_usage/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Default Usage">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Default Usage
              </div>
            </div>
          </a>
        
        
          
          <a href="../api/" class="md-footer__link md-footer__link--next" aria-label="Next: Pharmbio API Reference">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Pharmbio API Reference
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - Pharmaceutical Bioinformatics Research Group, Uppsala University, Sweden
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/pharmbio/pharmbio_package" target="_blank" rel="noopener" title="Pharmbio" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "navigation.footer", "content.action.edit", "content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate", "announce.dismiss", "content.action.view", "navigation.indexes", "navigation.sections", "navigation.top", "navigation.tracking", "search.share", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>